# Memoized function

Function takes 400 ms to complete.

## Refresh in background

### 300 request p/s during 60 seconds

Config:

```json
{
  "cacheKey": "test",
  "cacheTTL": 5,
  "lockTTL": 1000,
  "lockSettings": {
    "retryCount": 10,
    "retryDelay": 100
  },
  "refreshInBackground": true,
  "refreshThreshold": 1000
}
```

Results:

```
http.request_rate: ............................................................. 300/sec
http.requests: ................................................................. 18000
http.response_time:
  min: ......................................................................... 0
  max: ......................................................................... 905
  mean: ........................................................................ 4.2
  median: ...................................................................... 1
  p95: ......................................................................... 2
  p99: ......................................................................... 43.4
```

```
http.request_rate: ............................................................. 600/sec
http.requests: ................................................................. 36000
http.response_time:
  min: ......................................................................... 0
  max: ......................................................................... 1157
  mean: ........................................................................ 37.2
  median: ...................................................................... 2
  p95: ......................................................................... 130.3
  p99: ......................................................................... 907
```

## Refresh in request

### 300 request p/s during 60 seconds

Config:

```json
{
  "cacheKey": "test",
  "cacheTTL": 5,
  "lockTTL": 1000,
  "lockSettings": {
    "retryCount": 10,
    "retryDelay": 100
  }
}
```

Results:

```
http.request_rate: ............................................................. 300/sec
http.requests: ................................................................. 18000
http.response_time:
  min: ......................................................................... 0
  max: ......................................................................... 698
  mean: ........................................................................ 24.2
  median: ...................................................................... 0
  p95: ......................................................................... 242.3
  p99: ......................................................................... 450.4
```

```
http.request_rate: ............................................................. 600/sec
http.requests: ................................................................. 36000
http.response_time:
  min: ......................................................................... 0
  max: ......................................................................... 4653
  mean: ........................................................................ 94.7
  median: ...................................................................... 1
  p95: ......................................................................... 632.8
  p99: ......................................................................... 1300.1
```
